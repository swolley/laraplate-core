includes:
    - vendor/larastan/larastan/extension.neon
    - vendor/nesbot/carbon/extension.neon
    - vendor/phpstan/phpstan/conf/bleedingEdge.neon

parameters:
    # Livello di analisi (0-9, max = 9)
    level: 5

    tmpDir: /tmp/phpstan
    
    # Directory da analizzare
    paths:
        - app/
        - bootstrap/app.php
        - config
        - database
        - public
        - routes
    
    # File da escludere
    excludePaths:
        - vendor/**
        
    # Ignora errori specifici
    ignoreErrors:
        # - '#Call to an undefined method [a-zA-Z0-9\\_]+::shouldReceive\(\)#'
        # - '#Call to an undefined method Illuminate\\Routing\\Route::name\(\).$#'
        # - '#Call to an undefined method Illuminate\\Routing\\Route::withoutMiddleware\(\).$#'
        # - '#Call to an undefined method Illuminate\\Routing\\Route::can\(\).$#'
        # - '#Call to an undefined method Illuminate\\Routing\\Route::where\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Http\\Requests\\CrudRequest::isJson\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Http\\Requests\\CrudRequest::json\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Http\\Requests\\CrudRequest::getRealMethod\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Grids\\Requests\\GridRequest::has\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Grids\\Requests\\GridRequest::get\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Grids\\Requests\\GridRequest::all\(\).$#'
        # - '#Call to an undefined method Modules\\Core\\Grids\\Requests\\GridRequest::getMethod\(\).$#'
        # - '#Call to an undefined static method Illuminate\\Database\\Eloquent\\Model::withTrashed\(\).$#'
        # - '#Call to an undefined static method Illuminate\\Database\\Eloquent\\Model::getTimestampColumns\(\).$#'
        # - '#Call to an undefined method Modules\\Core\Grids\\Casts\\GridRequestData|Modules\\Core\\Grids\\Requests\\GridRequest::getMethod\(\).$#'
        # - '#Call to an undefined method Illuminate\\Http\\Request::getMethod\(\).$#'
        # Ignora gli errori relativi ai metodi dei trait HasValidations e HasPermissions
        # - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Model::shouldSkipValidation\(\)#'
        # - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Model::validateWithRules\(\)#'
        # - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Model::getRules\(\)#'
        # - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Model::getOperationRules\(\)#'
        # - '#Call to an undefined method Illuminate\\Foundation\\Auth\\User::isSuperAdmin\(\)#'
        # - '#Call to an undefined method Illuminate\\Foundation\\Auth\\User::hasPermission\(\)#'
        - 
          message: "#Called 'env' outside of the config directory which returns null when the config is cached, use 'config'.$#"
          identifier: larastan.noEnvCallsOutsideOfConfig
          path: Modules/*/config/*
        # - '#Static call to instance method __construct\(\)#'
        - '#Class PHP_CodeSniffer\\Standards\\Squiz\\Sniffs\\PHP\\EvalSniff not found.#'
        - '#Class PHP_CodeSniffer\\Standards\\PSR1\\Sniffs\\Methods\\CamelCapsMethodNameSniff not found.#'
        - '#Class PHP_CodeSniffer\\Standards\\Generic\\Sniffs\\WhiteSpace\\DisallowTabIndentSniff not found.#'
        - '#Class PHP_CodeSniffer\\Standards\\Generic\\Sniffs\\Metrics\\CyclomaticComplexitySniff not found.#'
        - '#PHPDoc tag @mixin contains unknown class.*IdeHelper.*#'
        # Laravel Scout - metodi aggiunti dal trait Searchable
        - '#Call to an undefined method.*::searchableAs\(\)#'
        # Cache::remember con array come TTL (probabilmente un bug, ma ignoriamo per ora)
        - '#Parameter.*\$ttl.*Cache::remember.*array given#'

    # Configurazione per Laravel
    checkModelProperties: true
    checkOctaneCompatibility: true
    noEnvCallsOutsideOfConfig: true
    checkModelAppends: true